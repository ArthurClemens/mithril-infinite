"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _mithril=require("mithril"),_mithril2=_interopRequireDefault(_mithril),_github=require("app/app/github"),_github2=_interopRequireDefault(_github),_mithrilInfinite=require("mithril-infinite"),_mithrilInfinite2=_interopRequireDefault(_mithrilInfinite),_styler=require("app/app/styler"),_styler2=_interopRequireDefault(_styler),_gridStyle=require("./grid-style"),_gridStyle2=_interopRequireDefault(_gridStyle);_styler2["default"].add("grid",_gridStyle2["default"]);var IMG_URL="http://arthurclemens.github.io/assets/mithril-infinite-scroll/thumbs/",vm={seen:{}},showImage=function(el,imgUrl){var url=IMG_URL+imgUrl,populate=function(){el.style.backgroundImage="url("+url+")",el.style.opacity=1,vm.seen[url]=1};if(vm.seen[url])populate();else{var img=new Image;img.onload=function(){populate()},img.src=url}},item=function(data){return(0,_mithril2["default"])("a.grid-item",(0,_mithril2["default"])(".image-holder",(0,_mithril2["default"])(".image",{config:function(el,inited,context){context.inited||_mithrilInfinite2["default"].isElementInViewport({el:el})&&(showImage(el,data.src),context.inited=!0)}})))},component={};component.view=function(){return _mithril2["default"].component(_mithrilInfinite2["default"],{maxPages:16,preloadPages:3,item:item,pageUrl:function(page){return"app/grid/data/page-"+page+".json"},"class":"grid",pageChange:function(page){console&&console.log("page",page)},after:(0,_github2["default"])()})},exports["default"]=component,module.exports=exports["default"];
//# sourceMappingURL=grid.js.map