"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _mithril=require("mithril"),_mithril2=_interopRequireDefault(_mithril),_appAppGithub=require("app/app/github"),_appAppGithub2=_interopRequireDefault(_appAppGithub),_mithrilInfinite=require("mithril-infinite"),_mithrilInfinite2=_interopRequireDefault(_mithrilInfinite),_appAppStyler=require("app/app/styler"),_appAppStyler2=_interopRequireDefault(_appAppStyler),_gridStyle=require("./grid-style"),_gridStyle2=_interopRequireDefault(_gridStyle);_appAppStyler2.default.add("grid",_gridStyle2.default);var IMG_URL="http://arthurclemens.github.io/assets/mithril-infinite-scroll/thumbs/",vm={seen:{}},showImage=function(r,n){var e=IMG_URL+n,i=function(){r.style.backgroundImage="url("+e+")",vm.seen[e]=1};if(vm.seen[e])i();else{var t=new Image;t.onload=function(){i()},t.src=e}},item=function(e){return(0,_mithril2.default)("a.grid-item",(0,_mithril2.default)(".image-holder",(0,_mithril2.default)(".image",{config:function(i,r,t){t.inited||_mithrilInfinite2.default.isElementInViewport({el:i})&&(showImage(i,e.src),t.inited=!0)}})))},component={};component.view=function(){return _mithril2.default.component(_mithrilInfinite2.default,{maxPages:16,preloadPages:3,item:item,pageUrl:function(e){return"app/grid/data/page-"+e+".json"},class:"grid",pageChange:function(e){console&&console.log("page",e)},after:(0,_appAppGithub2.default)()})},exports.default=component,module.exports=exports.default;