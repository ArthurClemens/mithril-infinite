{"version":3,"sources":["horizontal.es6"],"names":["_mithril","require","_github","_mithrilInfinite","_styler","_horizontalStyle","_styler2","add","_horizontalStyle2","IMG_URL","vm","seen","fadeInImage","el","imgUrl","url","showImage","style","backgroundImage","opacity","img","Image","onload","src","item","data","_mithril2","config","inited","context","_mithrilInfinite2","isElementInViewport","component","view","maxPages","pageUrl","page","class","axis","pageSize","content","length","pageChange","console","log","_github2"],"mappings":"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","file":"horizontal.js","sourcesContent":["'use strict';\n\nimport m from 'mithril';\nimport github from 'app/app/github';\nimport infinite from 'mithril-infinite';\n\nimport styler from 'app/app/styler';\nimport horizontalStyle from './horizontal-style';\nstyler.add('horizontal', horizontalStyle);\n\nconst IMG_URL = 'http://arthurclemens.github.io/assets/mithril-infinite-scroll/thumbs/';\n\nlet vm = {\n    seen: {}\n};\n\n// fade in first time only\nconst fadeInImage = (el, imgUrl) => {\n    const url = IMG_URL + imgUrl;\n    const showImage = () => {\n        el.style.backgroundImage = 'url(' + url + ')';\n        el.style.opacity = 1;\n        vm.seen[url] = 1;\n    };\n    if (!vm.seen[url]) {\n        let img = new Image();\n        img.onload = () => {\n            showImage();\n        };\n        img.src = url;\n    } else {\n        showImage();\n    }\n};\n\nconst item = (data) => {\n    return m('a.grid-item',\n        m('.image-holder',\n            m('.image', {\n                config: (el, inited, context) => {\n                    if (context.inited) {\n                        return;\n                    }\n                    if (infinite.isElementInViewport({el: el})) {\n                        fadeInImage(el, data.src);\n                        context.inited = true;\n                    }\n                }\n            })\n        )\n    );\n};\n\nlet component = {};\ncomponent.view = () => {\n    return [\n        m.component(infinite, {\n            maxPages: 16,\n            item: item,\n            pageUrl: page => 'app/horizontal/data/page-' + page + '.json',\n            class: 'horizontal',\n            axis: 'x',\n            pageSize: (content) => (content.length || 12) * (210 + 2 * 4), // values from CSS including margins\n            pageChange: page => {\n                if (console) {\n                    console.log('page', page);\n                }\n            }\n        }),\n        github()\n    ];\n};\n\nexport default component;\n"]}