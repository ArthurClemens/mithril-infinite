"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _mithril=require("mithril"),_mithril2=_interopRequireDefault(_mithril),_github=require("app/app/github"),_github2=_interopRequireDefault(_github),_mithrilInfinite=require("mithril-infinite"),_mithrilInfinite2=_interopRequireDefault(_mithrilInfinite),_styler=require("app/app/styler"),_styler2=_interopRequireDefault(_styler),_pagingStyle=require("app/paging/paging-style"),_pagingStyle2=_interopRequireDefault(_pagingStyle);_styler2["default"].add("paging",_pagingStyle2["default"]);var IMG_URL="http://arthurclemens.github.io/assets/mithril-infinite-scroll/thumbs/",item=function(data){return(0,_mithril2["default"])("a.grid-item",(0,_mithril2["default"])(".image-holder",(0,_mithril2["default"])(".image",{config:function(el,inited,context){context.inited||(el.style.backgroundImage="url("+IMG_URL+data.src+")")}})))},component={};component.controller=function(){var getData=function(page){return _mithril2["default"].request({method:"GET",url:"app/grid/data/page-"+page+".json"})},pageCount=_mithril2["default"].prop(),page=_mithril2["default"].route.param("page")?parseInt(_mithril2["default"].route.param("page"),10):1,pageNum=_mithril2["default"].prop(page),pageData=function(pageNum){return getData(pageNum).then(function(response){return pageCount(response.length),response})};return{pageData:pageData,pageCount:pageCount,pageNum:pageNum,hasPrev:function(){return pageNum()>1},hasNext:function(){return pageNum()!==pageCount()}}},component.view=function(ctrl){var pageNum=_mithril2["default"].route.param("page")?parseInt(_mithril2["default"].route.param("page"),10):ctrl.pageNum();return(0,_mithril2["default"])("div",[(0,_mithril2["default"])(".paging",[(0,_mithril2["default"])(".count","Page "+pageNum),_mithril2["default"].component(_mithrilInfinite2["default"],{item:item,pageData:ctrl.pageData,pageChange:ctrl.pageNum,currentPage:pageNum,autoSize:!1}),(0,_mithril2["default"])(".pager",[(0,_mithril2["default"])("a",{"class":ctrl.hasPrev()?"":"disabled",href:"/paging?page="+(pageNum-1),config:_mithril2["default"].route},"Prev"),(0,_mithril2["default"])("a",{"class":ctrl.hasNext()?"":"disabled",href:"/paging?page="+(pageNum+1),config:_mithril2["default"].route},"Next")])]),(0,_github2["default"])()])},exports["default"]=component,module.exports=exports["default"];
//# sourceMappingURL=paging.js.map