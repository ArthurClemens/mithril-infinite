"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _mithril=require("mithril"),_mithril2=_interopRequireDefault(_mithril),_github=require("app/app/github"),_github2=_interopRequireDefault(_github),_mithrilInfinite=require("mithril-infinite"),_mithrilInfinite2=_interopRequireDefault(_mithrilInfinite),_styler=require("app/app/styler"),_styler2=_interopRequireDefault(_styler),_pagingStyle=require("app/paging/paging-style"),_pagingStyle2=_interopRequireDefault(_pagingStyle);_styler2.default.add("paging",_pagingStyle2.default);var IMG_URL="http://arthurclemens.github.io/assets/mithril-infinite-scroll/thumbs/",item=function(e){return(0,_mithril2.default)("a.grid-item",(0,_mithril2.default)(".image-holder",(0,_mithril2.default)(".image",{config:function(t,r,i){i.inited||(t.style.backgroundImage="url("+IMG_URL+e.src+")")}})))},component={};component.controller=function(){var i=function(e){return _mithril2.default.request({method:"GET",url:"app/grid/data/page-"+e+".json"})},e=_mithril2.default.prop(),r=_mithril2.default.route.param("page")?parseInt(_mithril2.default.route.param("page"),10):1,t=_mithril2.default.prop(r),a=function(t){return i(t).then(function(t){return e(t.length),t})};return{pageData:a,pageCount:e,pageNum:t,hasPrev:function(){return t()>1},hasNext:function(){return t()!==e()}}},component.view=function(e){var t=_mithril2.default.route.param("page")?parseInt(_mithril2.default.route.param("page"),10):e.pageNum();return(0,_mithril2.default)("div",[(0,_mithril2.default)(".paging",[(0,_mithril2.default)(".count","Page "+t),_mithril2.default.component(_mithrilInfinite2.default,{item:item,pageData:e.pageData,pageChange:e.pageNum,currentPage:t}),(0,_mithril2.default)(".pager",[(0,_mithril2.default)("a",{class:e.hasPrev()?"":"disabled",href:"/paging?page="+(t-1),config:_mithril2.default.route},"Prev"),(0,_mithril2.default)("a",{class:e.hasNext()?"":"disabled",href:"/paging?page="+(t+1),config:_mithril2.default.route},"Next")])]),(0,_github2.default)()])},exports.default=component;