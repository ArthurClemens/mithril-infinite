{"version":3,"sources":["paging.es6"],"names":["_mithril","require","_github","_mithrilInfinite","_styler","_pagingStyle","_styler2","add","_pagingStyle2","IMG_URL","item","data","_mithril2","config","el","inited","context","style","backgroundImage","src","component","controller","getData","page","request","method","url","pageCount","prop","route","param","parseInt","pageNum","pageData","then","response","length","hasPrev","hasNext","view","ctrl","_mithrilInfinite2","pageChange","currentPage","autoSize","class","href","_github2"],"mappings":"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","file":"paging.js","sourcesContent":["'use strict';\n\nimport m from 'mithril';\nimport github from 'app/app/github';\nimport infinite from 'mithril-infinite';\n\nimport styler from 'app/app/styler';\nimport pagingStyle from 'app/paging/paging-style';\nstyler.add('paging', pagingStyle);\n\nconst IMG_URL = 'http://arthurclemens.github.io/assets/mithril-infinite-scroll/thumbs/';\n\nconst item = (data) => {\n    return m('a.grid-item',\n        m('.image-holder',\n            m('.image', {\n                config: (el, inited, context) => {\n                    if (context.inited) {\n                        return;\n                    }\n                    el.style.backgroundImage = 'url(' + IMG_URL + data.src + ')';\n                }\n            })\n        )\n    );\n};\n\nconst component = {};\ncomponent.controller = () => {\n    const getData = (page) => {\n        return m.request({\n            method: 'GET',\n            url: 'app/grid/data/page-' + page + '.json'\n        });\n    };\n    const pageCount = m.prop();\n    const page = m.route.param('page')\n        ? parseInt(m.route.param('page'), 10)\n        : 1;\n    const pageNum = m.prop(page);\n    const pageData = (pageNum) => {\n        return getData(pageNum).then((response) => {\n            pageCount(response.length);\n            return response;\n        });\n    };\n\n    return {\n        pageData,\n        pageCount,\n        pageNum,\n        hasPrev: () => (pageNum() > 1),\n        hasNext: () => (pageNum() !== pageCount())\n    };\n};\ncomponent.view = (ctrl) => {\n    const pageNum = m.route.param('page')\n        ? parseInt(m.route.param('page'), 10)\n        : ctrl.pageNum();\n\n    return m('div', [\n        m('.paging', [\n            m('.count', `Page ${pageNum}`),\n            m.component(infinite, {\n                item: item, // draws one item\n                pageData: ctrl.pageData, // fetches data\n                pageChange: ctrl.pageNum,\n                currentPage: pageNum,\n                autoSize: false // disabled because we are already setting the height in CSS\n            }),\n            m('.pager', [\n                m('a', {\n                    class: !ctrl.hasPrev() ? 'disabled' : '',\n                    href: '/paging?page=' + (pageNum - 1),\n                    config: m.route\n                }, 'Prev'),\n                m('a', {\n                    class: !ctrl.hasNext() ? 'disabled' : '',\n                    href: '/paging?page=' + (pageNum + 1),\n                    config: m.route\n                }, 'Next')\n            ])\n        ]),\n        github()\n    ]);\n};\n\nexport default component;\n"]}