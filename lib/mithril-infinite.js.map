{"version":3,"file":"mithril-infinite.js","sources":["mithril-infinite.es6"],"names":["_verge","require","_mithril","_j2c","SEL_PADDING","SCROLL_WATCH_TIMER","RESIZE_TIMER","LEEWAY","CSS_CLASSES","scrollView","scrollViewX","scrollViewY","scrollContent","content","pages","page","pageEven","pageOdd","before","after","Object","assign","target","source","key","index","arguments","prototype","hasOwnProperty","call","numToId","pageNum","substring","length","getElementSize","el","axis","styles","window","getComputedStyle","margin","parseFloat","marginLeft","marginRight","scrollWidth","_margin","marginTop","marginBottom","scrollHeight","getCurrentPage","scrollAmount","state","pageNumKeys","keys","dimensions","sort","acc","currentPage","forEach","pageKey","parseInt","size","calculateSize","from","to","fromIndex","Math","max","toIndex","slice","isPageInViewport","id","querySelector","infinite","isElementInViewport","leeway","getPageData","url","_mithril2","request","method","initialValue","background","controller","opts","undefined","prop","pageData","result","then","r","pageUrl","data","redraw","view","ctrl","pageTag","className","join","dimension","placeholder","data-page","class","style","width","height","pageSize","cssSize","autoSize","isScrolling","processPageData","opts1","map","item","config","prevSize","setTimeout","getDimensions","scrolled","contentSize","scrollWatchScrollingStateId","scrollWatchUpdateStateId","preloadSlots","preloadPages","boundingClientRect","maxPages","Number","MAX_VALUE","whichScroll","scrollThrottle","throttle","pageChange","minPage","maxPage","prePages","i","push","_pageNum","contentTag","classList","isLastPageVisible","getBoundingClientRect","maxSlots","maxPreloadPages","inited","context","document","setDimensions","whichSize","handleScroll","clearTimeout","addEventListener","onunload","removeEventListener","min-width","min-height","p","component","visibility","x","_verge2","inX","y","inY","both","inViewport","resizeTimer","onresize","styler","add","_len","Array","_key","remove","styleEl","createElement","setAttribute","styleList","scoped","@global","sheet","_j2c2","appendChild","createTextNode","head","old","getElementById","parentNode","removeChild","_defineProperty","_ref3","-webkit-overflow-scrolling","overflow-x","overflow-y"],"mappings":"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"}