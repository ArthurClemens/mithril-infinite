{"version":3,"file":"mithril-infinite.js","sources":["mithril-infinite.es6"],"names":["_verge","require","_mithril","_j2c","SEL_PADDING","SCROLL_WATCH_TIMER","RESIZE_TIMER","LEEWAY","CSS_CLASSES","scrollView","scrollViewX","scrollViewY","scrollContent","content","pages","page","pageEven","pageOdd","before","after","Object","assign","target","source","key","index","arguments","prototype","hasOwnProperty","call","numToId","pageNum","substring","length","getElementSize","el","axis","styles","window","getComputedStyle","margin","parseFloat","marginLeft","marginRight","Math","round","scrollWidth","_margin","marginTop","marginBottom","scrollHeight","getCurrentPage","scrollAmount","state","pageNumKeys","keys","dimensions","sort","acc","currentPage","forEach","pageKey","parseInt","size","calculateSize","from","to","fromIndex","max","toIndex","slice","isPageInViewport","id","querySelector","infinite","isElementInViewport","leeway","getPageData","url","_mithril2","request","method","initialValue","background","controller","opts","undefined","prop","pageData","result","then","r","pageUrl","data","redraw","view","ctrl","pageTag","className","join","dimension","placeholder","data-page","class","style","width","height","pageSize","cssSize","autoSize","isScrolling","processPageData","opts1","map","item","config","prevSize","setTimeout","getDimensions","scrolled","contentSize","scrollWatchScrollingStateId","scrollWatchUpdateStateId","preloadSlots","preloadPages","boundingClientRect","maxPages","Number","MAX_VALUE","whichScroll","scrollThrottle","throttle","pageChange","minPage","maxPage","prePages","i","push","_pageNum","contentTag","classList","isFirstPageVisible","isLastPageVisible","getBoundingClientRect","maxSlots","maxPreloadPages","inited","context","document","setDimensions","whichSize","handleScroll","clearTimeout","addEventListener","onunload","removeEventListener","min-width","min-height","visibility","p","component","x","_verge2","inX","y","inY","both","inViewport","resizeTimer","onresize","styler","add","_len","Array","_key","remove","styleEl","createElement","setAttribute","styleList","scoped","@global","sheet","_j2c2","appendChild","createTextNode","head","old","getElementById","parentNode","removeChild","_defineProperty","_ref3","-webkit-overflow-scrolling","overflow-x","overflow-y"],"mappings":"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"}