!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.infinite=t()}(this,function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}function t(e){return parseFloat(e)||0}function n(e){for(var n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return n.reduce(function(n,r){return n+t(e["border-"+r+"-width"])},0)}function r(e){var r=e.clientWidth,i=e.clientHeight;if(!r&&!i)return D;var a=V(e).getComputedStyle(e),l=function(e){for(var n={},r=0,i=["top","right","bottom","left"];r<i.length;r+=1){var o=i[r],a=e["padding-"+o];n[o]=t(a)}return n}(a),s=l.left+l.right,u=l.top+l.bottom,c=t(a.width),f=t(a.height);if("border-box"===a.boxSizing&&(Math.round(c+s)!==r&&(c-=n(a,"left","right")+s),Math.round(f+u)!==i&&(f-=n(a,"top","bottom")+u)),!function(e){return e===V(e).document.documentElement}(e)){var d=Math.round(c+s)-r,h=Math.round(f+u)-i;1!==Math.abs(d)&&(c-=d),1!==Math.abs(h)&&(f-=h)}return o(l.left,l.top,c,f)}function i(e){return T?L(e)?function(e){var t=e.getBBox();return o(0,0,t.width,t.height)}(e):r(e):D}function o(e,t,n,r){return{x:e,y:t,width:n,height:r}}function a(e,t){for(var n in t)ie.call(t,n)&&(!n.indexOf("$")||n in e||(e[n]=t[n]));return e}function l(e,t){var n,r,i=[];for(r in t)if(ie.call(t,r))for(n in e)ie.call(e,n)&&i.push(e[n]+t[r]);return i}function s(e){for(var t,n=[],r=[],i=0;t=ae.exec(e);)switch(t[0]){case"(":i++;break;case")":i--;break;case",":if(i)break;n.push(t.index)}for(t=n.length;t--;)r.unshift(e.slice(n[t]+1)),e=e.slice(0,n[t]);return r.unshift(e),r}function u(e,t){for(var n,r,i=[],o=[];r=le.exec(e);)"&"==r[0]&&i.push(r.index);for(r=i.length;r--;)o.unshift(e.slice(i[r]+1)),e=e.slice(0,i[r]);for(o.unshift(e),1===o.length&&o.unshift(""),n=[o[0]],r=1;r<o.length;r++)n=l(n,l(t,[o[r]]));return n.join(",")}function c(e){return function t(n){if(Q.call(n)===ee)for(var r=0;r<n.length;r++)t(n[r]);else e(n)}}function f(e){return"-"+e.toLowerCase()}function d(e,t,n,r,i){var o,a,l;if(null!=r)switch(Q.call(r=r.valueOf())){case ee:for(o=0;o<r.length;o++)d(e,t,n,r[o],i);break;case te:n=n&&n+"-";for(o in r)if(ie.call(r,o))if(a=r[o],/\$/.test(o))for(l in o=o.split("$"))ie.call(o,l)&&d(e,t,n+o[l],a,i);else d(e,t,n+o,a,i);break;default:o=n.replace(/_/g,"-").replace(/[A-Z]/g,f),!i||"animation-name"!=o&&"animation"!=o&&"list-style"!=o||(r=r.split(",").map(function(t){return t.replace(/^\s*(?:(var\([^)]+\))|:?global\(\s*([_A-Za-z][-\w]*)\s*\)|()(-?[_A-Za-z][-\w]*))/,e.localizeReplacer)}).join(",")),t.decl(o,r)}}function h(e,t,n,r,i,o,a){for(var l=0;l<e.$atHandlers.length;l++)if(e.$atHandlers[l](e,t,n,r,i,o,a))return;if(!n[3]&&/^global$/.test(n[2]))p(e,t,i,r,0,a);else if(!n[3]&&/^local$/.test(n[2]))p(e,t,i,r,1,a);else if(n[3]&&/^adopt$/.test(n[2])){if(!o||a)return t.err("@adopt global or nested: "+n[0]);if(!/^\.?[_A-Za-z][-\w]*$/.test(n[3]))return t.err("bad adopter "+JSON.stringify(n[3])+" in "+n[0]);l=[],c(function(e,r){null!=e&&/^\.?[_A-Za-z][-\w]*(?:\s+\.?[_A-Za-z][-\w]*)*$/.test(r=e+"")?l.push(r.replace(/\./g,"")):t.err("bad adoptee "+JSON.stringify(e)+" in "+n[0])})(r),l.length&&(e.localize(n[3]=n[3].replace(/\./g,"")),e.names[n[3]]+=" "+l.join(" "))}else!n[3]&&/^(?:namespace|import|charset)$/.test(n[2])?c(function(e){t.atrule(n[1],n[2],e)})(r):!n[3]&&/^(?:font-face|viewport)$/.test(n[2])?c(function(r){t.atrule(n[1],n[2],n[3],1),d(e,t,"",r,o),t._atrule()})(r):n[3]&&/^(?:media|supports|page|keyframes)$/.test(n[2])?(o&&"keyframes"==n[2]&&(n[3]=n[3].replace(/(var\([^)]+\))|:?global\(\s*([_A-Za-z][-\w]*)\s*\)|()(-?[_A-Za-z][-\w]*)/,e.localizeReplacer)),t.atrule(n[1],n[2],n[3],1),"page"==n[2]?d(e,t,"",r,o):p(e,t,"keyframes"==n[2]?"":i,r,o,a+1),t._atrule()):t.err("Unsupported at-rule: "+n[0])}function p(e,t,n,r,i,o){var a,l,c,f;switch(Q.call(r)){case te:for(a in r)if(ie.call(r,a))if(l=r[a],n.length>0&&/^[-\w$]+$/.test(a))if(c||(c=1,t.rule(n)),/\$/.test(a))for(f in a=a.split("$"))ie.call(a,f)&&d(e,t,a[f],l,i);else d(e,t,a,l,i);else/^@/.test(a)?(c=0,h(e,t,/^(.(?:-[\w]+-)?([_A-Za-z][-\w]*))\b\s*(.*?)\s*$/.exec(a)||[a,"@","",""],l,n,i,o)):(c=0,p(e,t,n.length>0&&(/,/.test(n)||/,/.test(a))?(f=s(n),s(i?a.replace(/("(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\/)|:global\(\s*(\.-?[_A-Za-z][-\w]*)\s*\)|(\.)(-?[_A-Za-z][-\w]*)/g,e.localizeReplacer):a).map(function(e){return/&/.test(e)?u(e,f):f.map(function(t){return t+e}).join(",")}).join(",")):/&/.test(a)?u(i?a.replace(/("(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\/)|:global\(\s*(\.-?[_A-Za-z][-\w]*)\s*\)|(\.)(-?[_A-Za-z][-\w]*)/g,e.localizeReplacer):a,[n]):n+(i?a.replace(/("(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\/)|:global\(\s*(\.-?[_A-Za-z][-\w]*)\s*\)|(\.)(-?[_A-Za-z][-\w]*)/g,e.localizeReplacer):a),l,i,o+1));break;case ee:for(a=0;a<r.length;a++)p(e,t,n,r[a],i,o);break;case ne:n.length||t.err("No selector"),t.rule(n||" "),d(e,t,"",r,i)}}function v(e,t){var n;return t?e:{init:function(){n=0,e.init()},done:function(t){return n&&(e._rule(),n=0),e.done(t)},atrule:function(t,r,i,o){n&&(e._rule(),n=0),e.atrule(t,r,i,o)},_atrule:function(t){n&&(e._rule(),n=0),e._atrule(t)},rule:function(t){t!==n&&(n&&e._rule(),e.rule(t),n=t)}}}function g(e){return":global("+e+")"}function m(e,t,n){return n={},n[e]=t,n}function y(e,t,n){if(arguments.length<3){var r=y.bind.apply(y,[null].concat([].slice.call(arguments,0)));return r.toString=function(){return"@"+e+" "+t},r}return m("@"+e+" "+t,n)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x=e(function(e){!function(){function t(e,t,n,r,i,o){return{tag:e,key:t,attrs:n,children:r,text:i,dom:o,domSize:void 0,state:void 0,_state:void 0,events:void 0,instance:void 0,skip:!1}}function n(e){for(var t in e)if(a.call(e,t))return!1;return!0}function r(e){var r,l=arguments[1],s=2;if(null==e||"string"!=typeof e&&"function"!=typeof e&&"function"!=typeof e.view)throw Error("The selector must be either a string or a component.");if("string"==typeof e)var u=o[e]||function(e){for(var t,n="div",r=[],a={};t=i.exec(e);){var l=t[1],s=t[2];if(""===l&&""!==s)n=s;else if("#"===l)a.id=s;else if("."===l)r.push(s);else if("["===t[3][0]){var u=t[6];u&&(u=u.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===t[4]?r.push(u):a[t[4]]=""===u?u:u||!0}}return r.length>0&&(a.className=r.join(" ")),o[e]={tag:n,attrs:a}}(e);if(null==l?l={}:("object"!==(void 0===l?"undefined":_(l))||null!=l.tag||Array.isArray(l))&&(l={},s=1),arguments.length===s+1)r=arguments[s],Array.isArray(r)||(r=[r]);else for(r=[];s<arguments.length;)r.push(arguments[s++]);var c=t.normalizeChildren(r);return"string"==typeof e?function(e,r,i){var o,l,s=!1,u=r.className||r.class;if(!n(e.attrs)&&!n(r)){var c={};for(var f in r)a.call(r,f)&&(c[f]=r[f]);r=c}for(var f in e.attrs)a.call(e.attrs,f)&&(r[f]=e.attrs[f]);void 0!==u&&(void 0!==r.class&&(r.class=void 0,r.className=u),null!=e.attrs.className&&(r.className=e.attrs.className+" "+u));for(var f in r)if(a.call(r,f)&&"key"!==f){s=!0;break}return Array.isArray(i)&&1===i.length&&null!=i[0]&&"#"===i[0].tag?l=i[0].children:o=i,t(e.tag,r.key,s?r:void 0,o,l)}(u,l,c):t(e,l.key,l,c)}t.normalize=function(e){return Array.isArray(e)?t("[",void 0,void 0,t.normalizeChildren(e),void 0,void 0):null!=e&&"object"!==(void 0===e?"undefined":_(e))?t("#",void 0,void 0,!1===e?"":e,void 0,void 0):e},t.normalizeChildren=function(e){for(var n=0;n<e.length;n++)e[n]=t.normalize(e[n]);return e};var i=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,o={},a={}.hasOwnProperty;r.trust=function(e){return null==e&&(e=""),t("<",void 0,void 0,e,void 0,void 0)},r.fragment=function(e,n){return t("[",e.key,e,t.normalizeChildren(n),void 0,void 0)};var l=r;if((s=function e(t){function n(e,t){return function n(l){var f;try{if(!t||null==l||"object"!==(void 0===l?"undefined":_(l))&&"function"!=typeof l||"function"!=typeof(f=l.then))c(function(){t||0!==e.length||console.error("Possible unhandled promise rejection:",l);for(var r=0;r<e.length;r++)e[r](l);o.length=0,a.length=0,u.state=t,u.retry=function(){n(l)}});else{if(l===i)throw new TypeError("Promise can't be resolved w/ itself");r(f.bind(l))}}catch(e){s(e)}}}function r(e){function t(e){return function(t){n++>0||e(t)}}var n=0,r=t(s);try{e(t(l),r)}catch(e){r(e)}}if(!(this instanceof e))throw new Error("Promise must be called with `new`");if("function"!=typeof t)throw new TypeError("executor must be a function");var i=this,o=[],a=[],l=n(o,!0),s=n(a,!1),u=i._instance={resolvers:o,rejectors:a},c="function"==typeof setImmediate?setImmediate:setTimeout;r(t)}).prototype.then=function(e,t){function n(e,t,n,a){t.push(function(t){if("function"!=typeof e)n(t);else try{r(e(t))}catch(e){i&&i(e)}}),"function"==typeof o.retry&&a===o.state&&o.retry()}var r,i,o=this._instance,a=new s(function(e,t){r=e,i=t});return n(e,o.resolvers,r,!0),n(t,o.rejectors,i,!1),a},s.prototype.catch=function(e){return this.then(null,e)},s.resolve=function(e){return e instanceof s?e:new s(function(t){t(e)})},s.reject=function(e){return new s(function(t,n){n(e)})},s.all=function(e){return new s(function(t,n){var r=e.length,i=0,o=[];if(0===e.length)t([]);else for(var a=0;a<e.length;a++)!function(a){function l(e){i++,o[a]=e,i===r&&t(o)}null==e[a]||"object"!==_(e[a])&&"function"!=typeof e[a]||"function"!=typeof e[a].then?l(e[a]):e[a].then(l,n)}(a)})},s.race=function(e){return new s(function(t,n){for(var r=0;r<e.length;r++)e[r].then(t,n)})},"undefined"!=typeof window){void 0===window.Promise&&(window.Promise=s);var s=window.Promise}else if(void 0!==b){void 0===b.Promise&&(b.Promise=s);s=b.Promise}var u=function(e){function t(e,r){if(Array.isArray(r))for(var i=0;i<r.length;i++)t(e+"["+i+"]",r[i]);else if("[object Object]"===Object.prototype.toString.call(r))for(var i in r)t(e+"["+i+"]",r[i]);else n.push(encodeURIComponent(e)+(null!=r&&""!==r?"="+encodeURIComponent(r):""))}if("[object Object]"!==Object.prototype.toString.call(e))return"";var n=[];for(var r in e)t(r,e[r]);return n.join("&")},c=new RegExp("^file://","i"),f=function(e,t){function n(){function e(){0==--t&&"function"==typeof f&&f()}var t=0;return function n(r){var i=r.then;return r.then=function(){t++;var o=i.apply(r,arguments);return o.then(e,function(n){if(e(),0===t)throw n}),n(o)},r}}function r(e,t){if("string"==typeof e){var n=e;null==(e=t||{}).url&&(e.url=n)}return e}function i(e,t){if(null==t)return e;for(var n=e.match(/:[^\/]+/gi)||[],r=0;r<n.length;r++){var i=n[r].slice(1);null!=t[i]&&(e=e.replace(n[r],t[i]))}return e}function o(e,t){var n=u(t);return""!==n&&(e+=(e.indexOf("?")<0?"?":"&")+n),e}function a(e){try{return""!==e?JSON.parse(e):null}catch(t){throw new Error(e)}}function l(e){return e.responseText}function s(e,t){if("function"==typeof e){if(!Array.isArray(t))return new e(t);for(var n=0;n<t.length;n++)t[n]=new e(t[n])}return t}var f,d=0;return{request:function(u,f){var d=n();u=r(u,f);var h=new t(function(t,n){null==u.method&&(u.method="GET"),u.method=u.method.toUpperCase();var r="GET"!==u.method&&"TRACE"!==u.method&&("boolean"!=typeof u.useBody||u.useBody);"function"!=typeof u.serialize&&(u.serialize="undefined"!=typeof FormData&&u.data instanceof FormData?function(e){return e}:JSON.stringify),"function"!=typeof u.deserialize&&(u.deserialize=a),"function"!=typeof u.extract&&(u.extract=l),u.url=i(u.url,u.data),r?u.data=u.serialize(u.data):u.url=o(u.url,u.data);var f=new e.XMLHttpRequest,d=!1,h=f.abort;f.abort=function(){d=!0,h.call(f)},f.open(u.method,u.url,"boolean"!=typeof u.async||u.async,"string"==typeof u.user?u.user:void 0,"string"==typeof u.password?u.password:void 0),u.serialize!==JSON.stringify||!r||u.headers&&u.headers.hasOwnProperty("Content-Type")||f.setRequestHeader("Content-Type","application/json; charset=utf-8"),u.deserialize!==a||u.headers&&u.headers.hasOwnProperty("Accept")||f.setRequestHeader("Accept","application/json, text/*"),u.withCredentials&&(f.withCredentials=u.withCredentials);for(var p in u.headers)({}).hasOwnProperty.call(u.headers,p)&&f.setRequestHeader(p,u.headers[p]);"function"==typeof u.config&&(f=u.config(f,u)||f),f.onreadystatechange=function(){if(!d&&4===f.readyState)try{var e=u.extract!==l?u.extract(f,u):u.deserialize(u.extract(f,u));if(f.status>=200&&f.status<300||304===f.status||c.test(u.url))t(s(u.type,e));else{var r=new Error(f.responseText);for(var i in e)r[i]=e[i];n(r)}}catch(e){n(e)}},r&&null!=u.data?f.send(u.data):f.send()});return!0===u.background?h:d(h)},jsonp:function(a,l){var u=n();a=r(a,l);var c=new t(function(t,n){var r=a.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+d++,l=e.document.createElement("script");e[r]=function(n){l.parentNode.removeChild(l),t(s(a.type,n)),delete e[r]},l.onerror=function(){l.parentNode.removeChild(l),n(new Error("JSONP request failed")),delete e[r]},null==a.data&&(a.data={}),a.url=i(a.url,a.data),a.data[a.callbackKey||"callback"]=r,l.src=o(a.url,a.data),e.document.documentElement.appendChild(l)});return!0===a.background?c:u(c)},setCompletionCallback:function(e){f=e}}}(window,s),d=function(e){function n(e){return e.attrs&&e.attrs.xmlns||O[e.tag]}function r(e,t,n,r,o,a,l){for(var s=n;s<r;s++){var u=t[s];null!=u&&i(e,u,o,l,a)}}function i(e,l,s,u,c){var h=l.tag;if("string"!=typeof h)return function(e,t,n,r,o){{if(a(t,n),null!=t.instance){var l=i(e,t.instance,n,r,o);return t.dom=t.instance.dom,t.domSize=null!=t.dom?t.instance.domSize:0,f(e,l,o),l}return t.domSize=0,E}}(e,l,s,u,c);switch(l.state={},null!=l.attrs&&b(l.attrs,l,s),h){case"#":return function(e,t,n){return t.dom=z.createTextNode(t.children),f(e,t.dom,n),t.dom}(e,l,c);case"<":return o(e,l,c);case"[":return function(e,t,n,i,o){var a=z.createDocumentFragment();if(null!=t.children){var l=t.children;r(a,l,0,l.length,n,null,i)}return t.dom=a.firstChild,t.domSize=a.childNodes.length,f(e,a,o),a}(e,l,s,u,c);default:return function(e,i,o,a,l){var s=i.tag,u=i.attrs,c=u&&u.is,h=(a=n(i)||a)?c?z.createElementNS(a,s,{is:c}):z.createElementNS(a,s):c?z.createElement(s,{is:c}):z.createElement(s);i.dom=h,null!=u&&function(e,t,n){for(var r in t)m(e,r,null,t[r],n)}(i,u,a);if(f(e,h,l),null!=i.attrs&&null!=i.attrs.contenteditable)d(i);else if(null!=i.text&&(""!==i.text?h.textContent=i.text:i.children=[t("#",void 0,void 0,i.text,void 0,void 0)]),null!=i.children){var p=i.children;r(h,p,0,p.length,o,null,a),function(e){var t=e.attrs;"select"===e.tag&&null!=t&&("value"in t&&m(e,"value",null,t.value,void 0),"selectedIndex"in t&&m(e,"selectedIndex",null,t.selectedIndex,void 0))}(i)}return h}(e,l,s,u,c)}}function o(e,t,n){var r={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"}[(t.children.match(/^\s*?<(\w+)/im)||[])[1]]||"div",i=z.createElement(r);i.innerHTML=t.children,t.dom=i.firstChild,t.domSize=i.childNodes.length;for(var o,a=z.createDocumentFragment();o=i.firstChild;)a.appendChild(o);return f(e,a,n),a}function a(e,n){var r;if("function"==typeof e.tag.view){if(e.state=Object.create(e.tag),null!=(r=e.state.view).$$reentrantLock$$)return E;r.$$reentrantLock$$=!0}else{if(e.state=void 0,null!=(r=e.tag).$$reentrantLock$$)return E;r.$$reentrantLock$$=!0,e.state=null!=e.tag.prototype&&"function"==typeof e.tag.prototype.view?new e.tag(e):e.tag(e)}if(e._state=e.state,null!=e.attrs&&b(e.attrs,e,n),b(e._state,e,n),e.instance=t.normalize(e._state.view.call(e.state,e)),e.instance===e)throw Error("A view cannot return the vnode it received as argument");r.$$reentrantLock$$=null}function l(e,t,n,o,a,l,d){if(t!==n&&(null!=t||null!=n))if(null==t)r(e,n,0,n.length,a,l,d);else if(null==n)h(t,0,t.length,n);else{if(t.length===n.length){for(var p=!1,v=0;v<n.length;v++)if(null!=n[v]&&null!=t[v]){p=null==n[v].key&&null==t[v].key;break}if(p){for(v=0;v<t.length;v++)t[v]!==n[v]&&(null==t[v]&&null!=n[v]?i(e,n[v],a,d,c(t,v+1,l)):null==n[v]?h(t,v,v+1,n):s(e,t[v],n[v],a,c(t,v+1,l),o,d));return}}if(o=o||function(e,t){if(null!=e.pool&&Math.abs(e.pool.length-t.length)<=Math.abs(e.length-t.length)){var n=e[0]&&e[0].children&&e[0].children.length||0,r=e.pool[0]&&e.pool[0].children&&e.pool[0].children.length||0,i=t[0]&&t[0].children&&t[0].children.length||0;if(Math.abs(r-i)<=Math.abs(n-i))return!0}return!1}(t,n)){var g=t.pool;t=t.concat(t.pool)}for(var m,y=0,w=0,b=t.length-1,_=n.length-1;b>=y&&_>=w;){if((S=t[y])!==(z=n[w])||o)if(null==S)y++;else if(null==z)w++;else if(S.key===z.key){var x=null!=g&&y>=t.length-g.length||null==g&&o;w++,s(e,S,z,a,c(t,++y,l),x,d),o&&S.tag===z.tag&&f(e,u(S),l)}else{if((S=t[b])!==z||o)if(null==S)b--;else if(null==z)w++;else{if(S.key!==z.key)break;x=null!=g&&b>=t.length-g.length||null==g&&o;s(e,S,z,a,c(t,b+1,l),x,d),(o||w<_)&&f(e,u(S),c(t,y,l)),b--,w++}else b--,w++}else y++,w++}for(;b>=y&&_>=w;){var S,z;if((S=t[b])!==(z=n[_])||o)if(null==S)b--;else if(null==z)_--;else if(S.key===z.key){x=null!=g&&b>=t.length-g.length||null==g&&o;s(e,S,z,a,c(t,b+1,l),x,d),o&&S.tag===z.tag&&f(e,u(S),l),null!=S.dom&&(l=S.dom),b--,_--}else{if(m||(m=function(e,t){for(var n={},r=0,r=0;r<t;r++){var i=e[r];if(null!=i){var o=i.key;null!=o&&(n[o]=r)}}return n}(t,b)),null!=z){var E=m[z.key];if(null!=E){var O=t[E];x=null!=g&&E>=t.length-g.length||null==g&&o;s(e,O,z,a,c(t,b+1,l),o,d),f(e,u(O),l),t[E].skip=!0,null!=O.dom&&(l=O.dom)}else{l=i(e,z,a,d,l)}}_--}else b--,_--;if(_<w)break}r(e,n,w,_+1,a,l,d),h(t,y,b+1,n)}}function s(e,r,c,f,h,v,g){var _=r.tag;if(_===c.tag){if(c.state=r.state,c._state=r._state,c.events=r.events,!v&&function(e,t){var n,r;null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate&&(n=e.attrs.onbeforeupdate.call(e.state,e,t));"string"!=typeof e.tag&&"function"==typeof e._state.onbeforeupdate&&(r=e._state.onbeforeupdate.call(e.state,e,t));if(!(void 0===n&&void 0===r||n||r))return e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,!0;return!1}(c,r))return;if("string"==typeof _)switch(null!=c.attrs&&(v?(c.state={},b(c.attrs,c,f)):x(c.attrs,c,f)),_){case"#":!function(e,t){e.children.toString()!==t.children.toString()&&(e.dom.nodeValue=t.children);t.dom=e.dom}(r,c);break;case"<":!function(e,t,n,r){t.children!==n.children?(u(t),o(e,n,r)):(n.dom=t.dom,n.domSize=t.domSize)}(e,r,c,h);break;case"[":!function(e,t,n,r,i,o,a){l(e,t.children,n.children,r,i,o,a);var s=0,u=n.children;if(n.dom=null,null!=u){for(var c=0;c<u.length;c++){var f=u[c];null!=f&&null!=f.dom&&(null==n.dom&&(n.dom=f.dom),s+=f.domSize||1)}1!==s&&(n.domSize=s)}}(e,r,c,v,f,h,g);break;default:!function(e,r,i,o,a){var s=r.dom=e.dom;a=n(r)||a,"textarea"===r.tag&&(null==r.attrs&&(r.attrs={}),null!=r.text&&(r.attrs.value=r.text,r.text=void 0));(function(e,t,n,r){if(null!=n)for(var i in n)m(e,i,t&&t[i],n[i],r);if(null!=t)for(var i in t)null!=n&&i in n||("className"===i&&(i="class"),"o"!==i[0]||"n"!==i[1]||y(i)?"key"!==i&&e.dom.removeAttribute(i):w(e,i,void 0))})(r,e.attrs,r.attrs,a),null!=r.attrs&&null!=r.attrs.contenteditable?d(r):null!=e.text&&null!=r.text&&""!==r.text?e.text.toString()!==r.text.toString()&&(e.dom.firstChild.nodeValue=r.text):(null!=e.text&&(e.children=[t("#",void 0,void 0,e.text,void 0,e.dom.firstChild)]),null!=r.text&&(r.children=[t("#",void 0,void 0,r.text,void 0,void 0)]),l(s,e.children,r.children,i,o,null,a))}(r,c,v,f,g)}else!function(e,n,r,o,l,u,c){if(u)a(r,o);else{if(r.instance=t.normalize(r._state.view.call(r.state,r)),r.instance===r)throw Error("A view cannot return the vnode it received as argument");null!=r.attrs&&x(r.attrs,r,o),x(r._state,r,o)}null!=r.instance?(null==n.instance?i(e,r.instance,o,c,l):s(e,n.instance,r.instance,o,l,u,c),r.dom=r.instance.dom,r.domSize=r.instance.domSize):null!=n.instance?(p(n.instance,null),r.dom=void 0,r.domSize=0):(r.dom=n.dom,r.domSize=n.domSize)}(e,r,c,f,h,v,g)}else p(r,null),i(e,c,f,g,h)}function u(e){var t=e.domSize;if(null!=t||null==e.dom){var n=z.createDocumentFragment();if(t>0){for(var r=e.dom;--t;)n.appendChild(r.nextSibling);n.insertBefore(r,n.firstChild)}return n}return e.dom}function c(e,t,n){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return n}function f(e,t,n){n&&n.parentNode?e.insertBefore(t,n):e.appendChild(t)}function d(e){var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var n=t[0].children;e.dom.innerHTML!==n&&(e.dom.innerHTML=n)}else if(null!=e.text||null!=t&&0!==t.length)throw new Error("Child node of a contenteditable must be trusted")}function h(e,t,n,r){for(var i=t;i<n;i++){var o=e[i];null!=o&&(o.skip?o.skip=!1:p(o,r))}}function p(e,t){function n(){if(++i===r&&(g(e),e.dom)){var n=e.domSize||1;if(n>1)for(var o=e.dom;--n;)v(o.nextSibling);v(e.dom),null==t||null!=e.domSize||function(e){return null!=e&&(e.oncreate||e.onupdate||e.onbeforeremove||e.onremove)}(e.attrs)||"string"!=typeof e.tag||(t.pool?t.pool.push(e):t.pool=[e])}}var r=1,i=0;if(e.attrs&&"function"==typeof e.attrs.onbeforeremove){null!=(o=e.attrs.onbeforeremove.call(e.state,e))&&"function"==typeof o.then&&(r++,o.then(n,n))}if("string"!=typeof e.tag&&"function"==typeof e._state.onbeforeremove){var o;null!=(o=e._state.onbeforeremove.call(e.state,e))&&"function"==typeof o.then&&(r++,o.then(n,n))}n()}function v(e){var t=e.parentNode;null!=t&&t.removeChild(e)}function g(e){if(e.attrs&&"function"==typeof e.attrs.onremove&&e.attrs.onremove.call(e.state,e),"string"!=typeof e.tag)"function"==typeof e._state.onremove&&e._state.onremove.call(e.state,e),null!=e.instance&&g(e.instance);else{var t=e.children;if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];null!=r&&g(r)}}}function m(e,t,n,r,i){var o=e.dom;if("key"!==t&&"is"!==t&&(n!==r||function(e,t){return"value"===t||"checked"===t||"selectedIndex"===t||"selected"===t&&e.dom===z.activeElement}(e,t)||"object"===(void 0===r?"undefined":_(r)))&&void 0!==r&&!y(t)){var a=t.indexOf(":");if(a>-1&&"xlink"===t.substr(0,a))o.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(a+1),r);else if("o"===t[0]&&"n"===t[1]&&"function"==typeof r)w(e,t,r);else if("style"===t)!function(e,t,n){t===n&&(e.style.cssText="",t=null);if(null==n)e.style.cssText="";else if("string"==typeof n)e.style.cssText=n;else{"string"==typeof t&&(e.style.cssText="");for(var r in n)e.style[r]=n[r];if(null!=t&&"string"!=typeof t)for(var r in t)r in n||(e.style[r]="")}}(o,n,r);else if(t in o&&!function(e){return"href"===e||"list"===e||"form"===e||"width"===e||"height"===e}(t)&&void 0===i&&!function(e){return e.attrs.is||e.tag.indexOf("-")>-1}(e)){if("value"===t){var l=""+r;if(("input"===e.tag||"textarea"===e.tag)&&e.dom.value===l&&e.dom===z.activeElement)return;if("select"===e.tag)if(null===r){if(-1===e.dom.selectedIndex&&e.dom===z.activeElement)return}else if(null!==n&&e.dom.value===l&&e.dom===z.activeElement)return;if("option"===e.tag&&null!=n&&e.dom.value===l)return}if("input"===e.tag&&"type"===t)return void o.setAttribute(t,r);o[t]=r}else"boolean"==typeof r?r?o.setAttribute(t,""):o.removeAttribute(t):o.setAttribute("className"===t?"class":t,r)}}function y(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function w(e,t,n){var r=e.dom,i="function"!=typeof S?n:function(e){var t=n.call(r,e);return S.call(r,e),t};if(t in r)r[t]="function"==typeof n?i:null;else{var o=t.slice(2);if(void 0===e.events&&(e.events={}),e.events[t]===i)return;null!=e.events[t]&&r.removeEventListener(o,e.events[t],!1),"function"==typeof n&&(e.events[t]=i,r.addEventListener(o,e.events[t],!1))}}function b(e,t,n){"function"==typeof e.oninit&&e.oninit.call(t.state,t),"function"==typeof e.oncreate&&n.push(e.oncreate.bind(t.state,t))}function x(e,t,n){"function"==typeof e.onupdate&&n.push(e.onupdate.bind(t.state,t))}var S,z=e.document,E=z.createDocumentFragment(),O={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};return{render:function(e,n){if(!e)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var r=[],i=z.activeElement,o=e.namespaceURI;null==e.vnodes&&(e.textContent=""),Array.isArray(n)||(n=[n]),l(e,e.vnodes,t.normalizeChildren(n),!1,r,null,"http://www.w3.org/1999/xhtml"===o?void 0:o),e.vnodes=n,null!=i&&z.activeElement!==i&&i.focus();for(var a=0;a<r.length;a++)r[a]()},setEventCallback:function(e){return S=e}}},h=function(e){function t(e){var t=i.indexOf(e);t>-1&&i.splice(t,2)}function n(){for(var e=1;e<i.length;e+=2)i[e]()}var r=d(e);r.setEventCallback(function(e){!1===e.redraw?e.redraw=void 0:n()});var i=[];return{subscribe:function(e,n){t(e),i.push(e,function(e){var t=0,n=null,r="function"==typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(){var i=Date.now();0===t||i-t>=16?(t=i,e()):null===n&&(n=r(function(){n=null,e(),t=Date.now()},16-(i-t)))}}(n))},unsubscribe:t,redraw:n,render:r.render}}(window);f.setCompletionCallback(h.redraw);l.mount=function(e){return function(n,r){if(null===r)return e.render(n,[]),void e.unsubscribe(n);if(null==r.view&&"function"!=typeof r)throw new Error("m.mount(element, component) expects a component, not a vnode");e.subscribe(n,function(){e.render(n,t(r))}),e.redraw()}}(h);var p=s,v=function(e){if(""===e||null==e)return{};"?"===e.charAt(0)&&(e=e.slice(1));for(var t=e.split("&"),n={},r={},i=0;i<t.length;i++){var o=t[i].split("="),a=decodeURIComponent(o[0]),l=2===o.length?decodeURIComponent(o[1]):"";"true"===l?l=!0:"false"===l&&(l=!1);var s=a.split(/\]\[?|\[/),u=n;a.indexOf("[")>-1&&s.pop();for(var c=0;c<s.length;c++){var f=s[c],d=s[c+1],h=""==d||!isNaN(parseInt(d,10)),p=c===s.length-1;if(""===f){null==r[a=s.slice(0,c).join()]&&(r[a]=0),f=r[a]++}null==u[f]&&(u[f]=p?l:h?[]:{}),u=u[f]}}return n},g=function(e){function t(t){var n=e.location[t].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);return"pathname"===t&&"/"!==n[0]&&(n="/"+n),n}function n(e,t,n){var r=e.indexOf("?"),i=e.indexOf("#"),o=r>-1?r:i>-1?i:e.length;if(r>-1){var a=i>-1?i:e.length,l=v(e.slice(r+1,a));for(var s in l)t[s]=l[s]}if(i>-1){var u=v(e.slice(i+1));for(var s in u)n[s]=u[s]}return e.slice(0,o)}var r,i="function"==typeof e.history.pushState,o="function"==typeof setImmediate?setImmediate:setTimeout,a={prefix:"#!"};return a.getPath=function(){switch(a.prefix.charAt(0)){case"#":return t("hash").slice(a.prefix.length);case"?":return t("search").slice(a.prefix.length)+t("hash");default:return t("pathname").slice(a.prefix.length)+t("search")+t("hash")}},a.setPath=function(t,r,o){var l={},s={};if(t=n(t,l,s),null!=r){for(var c in r)l[c]=r[c];t=t.replace(/:([^\/]+)/g,function(e,t){return delete l[t],r[t]})}var f=u(l);f&&(t+="?"+f);var d=u(s);if(d&&(t+="#"+d),i){var h=o?o.state:null,p=o?o.title:null;e.onpopstate(),o&&o.replace?e.history.replaceState(h,p,a.prefix+t):e.history.pushState(h,p,a.prefix+t)}else e.location.href=a.prefix+t},a.defineRoutes=function(t,l,s){function u(){var r=a.getPath(),i={},o=n(r,i,i),u=e.history.state;if(null!=u)for(var c in u)i[c]=u[c];for(var f in t){var d=new RegExp("^"+f.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(d.test(o))return void o.replace(d,function(){for(var e=f.match(/:[^\/]+/g)||[],n=[].slice.call(arguments,1,-2),o=0;o<e.length;o++)i[e[o].replace(/:|\./g,"")]=decodeURIComponent(n[o]);l(t[f],i,r,f)})}s(r,i)}i?e.onpopstate=function(e){return function(){null==r&&(r=o(function(){r=null,e()}))}}(u):"#"===a.prefix.charAt(0)&&(e.onhashchange=u),u()},a};l.route=function(e,n){var r,i,o,a,l,s=g(e),u=function(e,u,c){if(null==e)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");var f=function(){null!=r&&n.render(e,r(t(i,o.key,o)))},d=function(e){if(e===u)throw new Error("Could not resolve default route "+u);s.setPath(u,null,{replace:!0})};s.defineRoutes(c,function(e,t,n){var s=l=function(e,u){s===l&&(i=null==u||"function"!=typeof u.view&&"function"!=typeof u?"div":u,o=t,a=n,l=null,r=(e.render||function(e){return e}).bind(e),f())};e.view||"function"==typeof e?s({},e):e.onmatch?p.resolve(e.onmatch(t,n)).then(function(t){s(e,t)},d):s(e,"div")},d),n.subscribe(e,f)};return u.set=function(e,t,n){null!=l&&((n=n||{}).replace=!0),l=null,s.setPath(e,t,n)},u.get=function(){return a},u.prefix=function(e){s.prefix=e},u.link=function(e){e.dom.setAttribute("href",s.prefix+e.attrs.href),e.dom.onclick=function(e){if(!(e.ctrlKey||e.metaKey||e.shiftKey||2===e.which)){e.preventDefault(),e.redraw=!1;var t=this.getAttribute("href");0===t.indexOf(s.prefix)&&(t=t.slice(s.prefix.length)),u.set(t,void 0,void 0)}}},u.param=function(e){return void 0!==o&&void 0!==e?o[e]:o},u}(window,h),l.withAttr=function(e,t,n){return function(r){t.call(n||this,e in r.currentTarget?r.currentTarget[e]:r.currentTarget.getAttribute(e))}};var m=d(window);l.render=m.render,l.redraw=h.redraw,l.request=f.request,l.jsonp=f.jsonp,l.parseQueryString=v,l.buildQueryString=u,l.version="1.1.6",l.vnode=t,e.exports=l}()}),S={scrollView:"mithril-infinite__scroll-view",scrollViewX:"mithril-infinite__scroll-view--x",scrollViewY:"mithril-infinite__scroll-view--y",scrollContent:"mithril-infinite__scroll-content",content:"mithril-infinite__content",pages:"mithril-infinite__pages",page:"mithril-infinite__page",pageEven:"mithril-infinite__page--even",pageOdd:"mithril-infinite__page--odd",placeholder:"mithril-infinite__page--placeholder",before:"mithril-infinite__before",after:"mithril-infinite__after"},z=e(function(e){!function(t,n,r){e.exports?e.exports=r():t.verge=r()}(b,0,function(){function e(){return{width:s(),height:u()}}function t(e,t){return!(!(e=e&&!e.nodeType?e[0]:e)||1!==e.nodeType)&&function(e,t){var n={};return t=+t||0,n.width=(n.right=e.right+t)-(n.left=e.left-t),n.height=(n.bottom=e.bottom+t)-(n.top=e.top-t),n}(e.getBoundingClientRect(),t)}var n={},r="undefined"!=typeof window&&window,i="undefined"!=typeof document&&document,o=i&&i.documentElement,a=r.matchMedia||r.msMatchMedia,l=a?function(e){return!!a.call(r,e).matches}:function(){return!1},s=n.viewportW=function(){var e=o.clientWidth,t=r.innerWidth;return e<t?t:e},u=n.viewportH=function(){var e=o.clientHeight,t=r.innerHeight;return e<t?t:e};return n.mq=l,n.matchMedia=a?function(){return a.apply(r,arguments)}:function(){return{}},n.viewport=e,n.scrollX=function(){return r.pageXOffset||o.scrollLeft},n.scrollY=function(){return r.pageYOffset||o.scrollTop},n.rectangle=t,n.aspect=function(n){var r=(n=null==n?e():1===n.nodeType?t(n):n).height,i=n.width;return r="function"==typeof r?r.call(n):r,(i="function"==typeof i?i.call(n):i)/r},n.inX=function(e,n){var r=t(e,n);return!!r&&r.right>=0&&r.left<=s()},n.inY=function(e,n){var r=t(e,n);return!!r&&r.bottom>=0&&r.top<=u()},n.inViewport=function(e,n){var r=t(e,n);return!!r&&r.bottom>=0&&r.right>=0&&r.top<=u()&&r.left<=s()},n})}),E=function(e,t){var n=window.getComputedStyle(e);if("x"===t){var r=parseFloat(n.marginLeft)+parseFloat(n.marginRight);return e.scrollWidth+r}var i=parseFloat(n.marginTop)+parseFloat(n.marginBottom);return e.scrollHeight+i},O=function(e){var t=e.el,n=e.axis,r=void 0===n?"y":n,i=e.leeway,o=void 0===i?300:i;return"y"===r?z.inY(t,o)||z.inY(t,-o):"x"===r?z.inX(t,o)||z.inX(t,-o):z.inViewport(t,o)||z.inViewport(t,-o)},A=function(e){return[S.page,e%2==0?S.pageEven:S.pageOdd].join(" ")},k=e(function(e){!function(){function t(){function e(){return arguments.length>0&&arguments[0]!==m&&n(e,arguments[0]),e._state.value}return function(e){e.constructor=t,e._state={id:g++,value:void 0,state:0,derive:void 0,recover:void 0,deps:{},parents:[],endStream:void 0,unregister:void 0},e.map=e["fantasy-land/map"]=s,e["fantasy-land/ap"]=u,e["fantasy-land/of"]=t,e.valueOf=c,e.toJSON=f,e.toString=c,Object.defineProperties(e,{end:{get:function(){if(!e._state.endStream){var n=t();n.map(function(t){return!0===t&&(l(e),n._state.unregister=function(){l(n)}),t}),e._state.endStream=n}return e._state.endStream}}})}(e),arguments.length>0&&arguments[0]!==m&&n(e,arguments[0]),e}function n(e,t){r(e,t);for(var n in e._state.deps)i(e._state.deps[n],!1);null!=e._state.unregister&&e._state.unregister(),function(e){e._state.changed=!1;for(var t in e._state.deps)e._state.deps[t]._state.changed=!1}(e)}function r(e,t){e._state.value=t,e._state.changed=!0,2!==e._state.state&&(e._state.state=1)}function i(e,t){var n=e._state.parents;if(n.length>0&&n.every(h)&&(t||n.some(p))){var i=e._state.derive();if(i===m)return!1;r(e,i)}}function o(e,n){if(!n.every(d))throw new Error("Ensure that each item passed to stream.combine/stream.merge is a stream");return function(e,t,n){var r=e._state;return r.derive=n,r.parents=t.filter(v),a(e,r.parents),i(e,!0),e}(t(),n,function(){return e.apply(this,n.concat([n.filter(p)]))})}function a(e,t){for(var n=0;n<t.length;n++)t[n]._state.deps[e._state.id]=e,a(e,t[n]._state.parents)}function l(e){for(var t=0;t<e._state.parents.length;t++){delete e._state.parents[t]._state.deps[e._state.id]}for(var n in e._state.deps){var r=e._state.deps[n],i=r._state.parents.indexOf(e);i>-1&&r._state.parents.splice(i,1)}e._state.state=2,e._state.deps={}}function s(e){return o(function(t){return e(t())},[this])}function u(e){return o(function(e,t){return e()(t())},[e,this])}function c(){return this._state.value}function f(){return null!=this._state.value&&"function"==typeof this._state.value.toJSON?this._state.value.toJSON():this._state.value}function d(e){return e._state}function h(e){return 1===e._state.state}function p(e){return e._state.changed}function v(e){return 2!==e._state.state}var g=0,m={};t["fantasy-land/of"]=t,t.merge=function(e){return o(function(){return e.map(function(e){return e()})},e)},t.combine=o,t.scan=function(e,t,n){var r=o(function(n){return t=e(t,n._state.value)},[n]);return 0===r._state.state&&r(t),r},t.scanMerge=function(e,t){var n=e.map(function(e){var t=e[0];return 0===t._state.state&&t(void 0),t});return o(function(){var r=arguments[arguments.length-1];return n.forEach(function(n,i){r.indexOf(n)>-1&&(t=e[i][1](t,n._state.value))}),t},n)},t.HALT=m,e.exports=t}()}),C=function(){function e(e,t){var n=-1;return e.some(function(e,r){return e[0]===t&&(n=r,!0)}),n}return"undefined"!=typeof Map?Map:function(){function t(){this.__entries__=[]}var n={size:{configurable:!0}};return n.size.get=function(){return this.__entries__.length},t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n+=1){var i=r[n];e.call(t,i[1],i[0])}},Object.defineProperties(t.prototype,n),t}()}(),T="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,M="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),j="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(M):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},N=2,P=["top","right","bottom","left","width","height","size","weight"],$="undefined"!=typeof MutationObserver,R=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){function n(){o&&(o=!1,e()),a&&i()}function r(){j(n)}function i(){var e=Date.now();if(o){if(e-l<N)return;a=!0}else o=!0,a=!1,setTimeout(r,t);l=e}var o=!1,a=!1,l=0;return i}(this.refresh.bind(this),20)};R.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},R.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},R.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},R.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},R.prototype.connect_=function(){T&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),$?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},R.prototype.disconnect_=function(){T&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},R.prototype.onTransitionEnd_=function(e){var t=e.propertyName;void 0===t&&(t="");P.some(function(e){return!!~t.indexOf(e)})&&this.refresh()},R.getInstance=function(){return this.instance_||(this.instance_=new R),this.instance_},R.instance_=null;var I=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n+=1){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},V=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||M},D=o(0,0,0,0),L="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof V(e).SVGGraphicsElement}:function(e){return e instanceof V(e).SVGElement&&"function"==typeof e.getBBox},q=function(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=o(0,0,0,0),this.target=e};q.prototype.isActive=function(){var e=i(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},q.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e};var H=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return I(a,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),a}(t);I(this,{target:e,contentRect:n})},U=function(e,t,n){if(this.activeObservations_=[],this.observations_=new C,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n};U.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof V(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new q(e)),this.controller_.addObserver(this),this.controller_.refresh())}},U.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof V(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},U.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},U.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},U.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new H(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},U.prototype.clearActive=function(){this.activeObservations_.splice(0)},U.prototype.hasActive=function(){return this.activeObservations_.length>0};var F="undefined"!=typeof WeakMap?new WeakMap:new C,Z=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=R.getInstance(),r=new U(t,n,this);F.set(this,r)};["observe","unobserve","disconnect"].forEach(function(e){Z.prototype[e]=function(){return(t=F.get(this))[e].apply(t,arguments);var t}});var W,X=void 0!==M.ResizeObserver?M.ResizeObserver:Z,B={oninit:function(e){var t=e.state,n=e.attrs,r=n.pageNum,i=k([]);if(n.pageData){var o=n.pageData(r);Promise.resolve(o).then(i).then(x.redraw)}else n.pageUrl&&function(e){return x.request({method:"GET",url:e})}(n.pageUrl(r)).then(i);var a=n.processPageData||function(e,t){return e&&e.length?e.map(function(e,r){return n.item(e,t,r)}):null};t.content=i,t.className=A(r),t.pageTag=n.pageTag||"div",t.processPageData=a},view:function(e){var t=e.state,n=e.attrs,r=n.pageId,i=n.pageSizes[r]||0,o=0;n.pageSize&&(o=n.pageSize(t.content()),n.updatePageSize(r,o));var a=o?o+"px":!n.autoSize||n.isScrolling&&i?i+"px":"auto",l=function(e){if(!o){var t=E(e,n.axis);t&&n.updatePageSize(r,t)}};return x(t.pageTag,{"data-page":r,class:t.className,style:i?"x"===n.axis?{width:a}:{height:a}:null,oncreate:function(e){var t=e.dom;new X(function(e){var r=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value.contentRect,f=c.width,d=c.height;("x"===n.axis&&f!==i||"y"===n.axis&&d!==i)&&l(t)}}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}}).observe(t)},onupdate:function(e){var t=e.dom;return l(t)}},t.processPageData(t.content(),{isScrolling:n.isScrolling,pageId:n.pageId,pageNum:n.pageNum}))}},J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y={oninit:function(e){return e.state.className=A(e.attrs.pageNum)},view:function(e){var t=e.state,n=e.attrs,r=n.pageId,i=n.pageSizes[r]||0;return x("div",{"data-page":r,class:[S.placeholder,t.className].join(" "),style:J({},"x"===n.axis?{width:i+"px"}:{height:i+"px"})})}},G=[],K={},Q=K.toString,ee=Q.call(G),te=Q.call(K),ne=Q.call(""),re=Q.call(Q),ie=K.hasOwnProperty,oe=Object.freeze||function(e){return e},ae=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g,le=/&|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g,se=new function(){function e(e){if(!b.length){l.push(function(e,t){return t?{init:o.init,decl:o.decl,done:o.done,err:o.err}:o});for(var t=0;t<2;t++)for(var n=l.length;n--;)b[t]=oe(a(l[n](b[t],!!t),b[t]))}return b[e]}function t(e){return u.names[e]||(u.names[e]=e+u.suffix),u.names[e].match(/^\S+/)}function n(e,n,r,i,o){return n||r||i+t(o)}var r,i,o={init:function(){r=[],i=[]},done:function(e){if(0!=i.length)throw new Error("j2c error(s): "+JSON.stringify(i,null,2)+"in context:\n"+r.join(""));return e?r:r.join("")},err:function(e){i.push(e),r.push("/* +++ ERROR +++ "+e+" */\n")},atrule:function(e,t,n,i){r.push(e,n&&" ",n,i?" {":";",u.endline)},_atrule:function(){r.push("}",u.endline)},rule:function(e){r.push(e," {",u.endline)},_rule:function(){r.push("}",u.endline)},decl:function(e,t){r.push(e,e&&":",t,";",u.endline)}},l=[v],s=[],u={at:y,global:g,kv:m,names:{},endline:"\n",suffix:"__j2c-"+Math.floor(4294967296*Math.random()).toString(36)+"-"+Math.floor(4294967296*Math.random()).toString(36)+"-"+Math.floor(4294967296*Math.random()).toString(36)+"-"+Math.floor(4294967296*Math.random()).toString(36),$plugins:[],sheet:function(t){var n=e(0);return n.init(),p(f[0],n,"",t,1,0),n.done()},inline:function(t,n){var r=e(1);return r.init(),d(f[1],r,"",t,!(n&&n.global)),r.done()}},f=[{localizeReplacer:n,localize:t,names:u.names,$atHandlers:s,atrule:h,decl:d,rule:p},{localizeReplacer:n,localize:t,names:u.names,decl:d}],w=c(function(e){~u.$plugins.indexOf(e)||(u.$plugins.push(e),Q.call(e)===re&&(e=e(u)),e&&(c(function(e){l.push(e)})(e.$filter||G),c(function(e){s.push(e)})(e.$at||G),a(u.names,e.$names||K),w(e.$plugins||G),o=e.$sink||o,a(u,e)))}),b=[];return w(G.slice.call(arguments)),u},ue=function(e){if(e){var t=document.getElementById(e);t&&t.parentNode.removeChild(t)}};!function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ue(e);var i=document.createElement("style");e&&i.setAttribute("id",e),n.forEach(function(e){Object.keys(e).length&&e.forEach(function(e){var t={"@global":e},n=se.sheet(t);i.appendChild(document.createTextNode(n))})}),document.head.appendChild(i)}("mithril-infinite",[w({},"."+S.scrollView,(W={"-webkit-overflow-scrolling":"touch",height:"100%"},w(W,"&."+S.scrollViewY,w({overflowX:"hidden",overflowY:"auto",height:"100%"}," ."+S.scrollContent,{height:"100%"})),w(W,"&."+S.scrollViewX,w({overflowX:"auto",overflowY:"hidden",width:"100%"}," ."+S.scrollContent,{width:"100%"})),W))]);var ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fe=function(e){return"000000".substring(0,"000000".length-(""+e).length)+e},de=function(e,t,n,r){var i=E(e,r);i&&(n[t]=i)},he=function(e){if(e.scrollView){var t=e.scrollView.getBoundingClientRect();e.boundingClientRect=e.boundingClientRect||t,t.width===e.boundingClientRect.width&&t.height===e.boundingClientRect.height||(e.preloadSlots=e.attrsPreloadSlots||1),e.boundingClientRect=t,e.contentSize&&e.preloadSlots<e.pageCount&&e.preloadSlots<=e.attrsMaxPreloadSlots&&e.contentSize<t.height&&(e.preloadSlots++,setTimeout(x.redraw,0))}};return{oninit:function(e){var t=e.attrs,n=t.axis||"y",r="x"===n?"scrollLeft":"scrollTop",i=void 0===t.autoSize||!1!==t.autoSize,o=t.pageSize,a=void 0!==t.throttle?1e3*t.throttle:200,l=t.contentTag||"div",s=[S.scrollView,"x"===n?S.scrollViewX:S.scrollViewY,t.class].join(" ");e.state={afterSize:null,beforeSize:null,boundingClientRect:{},currentPageNum:0,isScrolling:!1,pageSizes:{},preloadSlots:t.preloadPages||1,scrollView:null,scrollWatchUpdateStateId:null,sortedKeys:[],attrsMaxPreloadSlots:t.maxPreloadPages||Number.MAX_VALUE,attrsPreloadSlots:t.preloadPages||1,autoSize:i,axis:n,classList:s,contentTag:l,pageSize:o,scroll:function(){var t=e.state;t.isScrolling=!0,t.scrollWatchUpdateStateId||(t.scrollWatchUpdateStateId=setTimeout(function(){x.redraw(),t.scrollWatchUpdateStateId=null,t.isScrolling=!1,setTimeout(function(){!1===t.isScrolling&&x.redraw()},60)},t.scrollThrottle))},scrollThrottle:a,whichScroll:r}},view:function(e){var t=e.state,n=e.attrs,r=t.scrollView?t.scrollView[t.whichScroll]:0,i=t.axis,o=void 0!==n.maxPages?n.maxPages:Number.MAX_VALUE,a=n.currentPage?parseInt(n.currentPage,10):function(e,t){var n=t.sortedKeys;if(0===n.length)return 1;for(var r=t.beforeSize||0,i=1,o=0;o<n.length;o+=1){var a=n[o];e>r&&(i=parseInt(a,10)),r+=t.pageSizes[a]}return i}(r,t);n.pageChange&&a!==t.currentPageNum&&n.pageChange(a),t.currentPageNum=a,t.scrollView&&n.getDimensions&&n.getDimensions({scrolled:r,size:t.contentSize});var l=function(e,t,n,r,i,o){for(var a=t?parseInt(t,10):r||1,l=n?parseInt(n,10):r||o,s=[],u=[],c=-i;c<=i;c+=1){var f=e+c;f>=a&&f<=l&&s.push(f)}for(var d=1;d<s[0];d+=1)u.push(d);return{pages:s,prePages:u,maxPageNum:l}}(a,n.from,n.to,n.currentPage,t.preloadSlots,o),s=l.pages,u=l.prePages,c=l.maxPageNum;t.contentSize=function(e,t,n){var r=Math.max(0,e-1);if(t<r)return 0;var i=t,o=n.sortedKeys.slice(r,i),a=n.beforeSize||0;return a=o.reduce(function(e,t){return e+=n.pageSizes[t]||0},a),a+=n.afterSize||0}(1,c,t),t.pageCount=s.length;var f=!c||function(e,t,n,r){if(!r)return!1;var i=fe(e),o=r.querySelector('[data-page="'+i+'"]');return O({el:o,axis:t})}(c,i,0,t.scrollView);return x("div",{oncreate:function(e){var r=e.dom;if(t.scrollView=n.scrollView?document.querySelector(n.scrollView):r,t.scrollView.className+=" "+t.classList,n.setDimensions){var o=n.setDimensions();if(o.size>0){var a="x"===i?"width":"height";r.style[a]=o.size+"px"}t.scrollView[t.whichScroll]=o.scrolled}t.scrollView.addEventListener("scroll",t.scroll)},onremove:function(){return t.scrollView.removeEventListener("scroll",t.scroll)}},x("div",{class:S.scrollContent,style:t.autoSize?ce({},"x"===i?{width:t.contentSize+"px"}:{height:t.contentSize+"px"},n.contentSize?"x"===i?{"min-width":n.contentSize+"px"}:{"min-height":n.contentSize+"px"}:{}):null},[x(t.contentTag,{class:S.content},[n.before?x("div",{class:S.before,oncreate:function(e){var n=e.dom;return de(n,"before",t,i)},onupdate:function(e){var n=e.dom;return de(n,"before",t,i)}},n.before):null,x("div",{class:S.pages},[u.map(function(e){return x(Y,{axis:i,key:fe(e),pageId:fe(e),pageNum:e,pageSizes:t.pageSizes})}),s.map(function(e){return x(B,{autoSize:t.autoSize,axis:i,isScrolling:t.isScrolling,item:n.item,key:fe(e),pageData:n.pageData,pageId:fe(e),pageNum:e,pageSize:t.pageSize,pageSizes:t.pageSizes,pageTag:n.pageTag,pageUrl:n.pageUrl,updatePageSize:function(e){return function(t,n){return e.pageSizes[t]=parseInt(n,10),e.sortedKeys=Object.keys(e.pageSizes).sort(),he(e)}}(t)})})]),n.after&&t.contentSize?x("div",{class:S.after,style:{visibility:f?"visible":"hidden"},oncreate:function(e){var n=e.dom;return de(n,"after",t,i)},onupdate:function(e){var n=e.dom;return de(n,"after",t,i)}},n.after):null])]))},isElementInViewport:O}});
//# sourceMappingURL=mithril-infinite-standalone.js.map
